generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// yarn prisma migrate dev

model Admin {
  id       String @id @default(uuid())
  user     String
  password String

  banners Banner[]

  @@map("admins")
}

model User {
  id       String  @id @default(uuid())
  user     String  @unique
  password String
  status   Boolean @default(true)
  regionID String

  region Region @relation(fields: [regionID], references: [id])

  fuelStation FuelStation[]
  person      Person[]
  store       Store[]
  map         Map[]
  contact     Contact[]
  banners     Banner[]

  createdAt DateTime? @default(now())

  @@map("users")
}

model Map {
  id     String @id @default(uuid())
  latlng Json?
  userID String

  user User @relation(fields: [userID], references: [id])

  @@map("maps")
}

model Region {
  id   String @id @default(uuid())
  name String

  user      User[]
  createdAt DateTime? @default(now())

  @@map("regions")
}

model Contact {
  id       String   @id @default(uuid())
  name     String?
  avatar   Json?
  whatsapp String
  time     Json?
  sector   String?
  saturday Boolean?
  sunday   Boolean?
  away     Boolean? //afastado
  userID   String?

  user User? @relation(fields: [userID], references: [id])

  @@map("contacts")
}

model Banner {
  id       String  @id @default(uuid())
  route    String
  paramsID String
  image    Json
  status   Boolean @default(true)
  userID   String?
  adminID  String?

  admin     Admin?    @relation(fields: [adminID], references: [id])
  user      User?     @relation(fields: [userID], references: [id])
  createdAt DateTime? @default(now())

  @@map("banners")
}

model Store {
  id        String   @id @default(uuid())
  avatar    Json?
  name      String?
  address   String?
  delivery  Boolean? @default(false)
  district  String?
  bio       String?
  reference String?
  userID    String

  user      User      @relation(fields: [userID], references: [id])
  product   Product[]
  createdAt DateTime? @default(now())

  @@map("stores")
}

//Marca
model Brand {
  id     String @id @default(uuid())
  name   String
  avatar Json?

  createdAt DateTime? @default(now())

  @@map("brands")
}

model Product {
  id            String   @id @default(uuid())
  reference     String?
  name          String
  description   String
  price         Float    @default(0)
  off           Float?   @default(0)
  size          String[]
  image         Json[]
  color         String[]
  storeID       String
  categoryID    String
  subcategoryID String?
  campaignID    String?

  store       Store        @relation(fields: [storeID], references: [id])
  category    Category     @relation(fields: [categoryID], references: [id])
  subcategory Subcategory? @relation(fields: [subcategoryID], references: [id])
  campaign    Campaign?    @relation(fields: [campaignID], references: [id])

  createdAt DateTime? @default(now())
  updatedAt DateTime? @default(now())

  @@map("products")
}

model Category {
  id   String @id @default(uuid())
  name String

  product     Product[]
  subcategory Subcategory[]

  createdAt DateTime? @default(now())

  @@map("categories")
}

model Subcategory {
  id         String @id @default(uuid())
  name       String
  categoryID String

  product  Product[]
  category Category  @relation(fields: [categoryID], references: [id])

  @@map("subcategories")
}

model Campaign {
  id     String  @id @default(uuid())
  name   String
  theme  String
  status Boolean @default(false)

  product Product[]

  @@map("campaigns")
}

model Person {
  id           String   @id @default(uuid())
  avatar       Json?
  name         String?
  district     String?
  address      String?
  bio          String?
  services     String[]
  professionID String?
  userID       String

  portfolio Portfolio[]

  user       User        @relation(fields: [userID], references: [id])
  profession Profession? @relation(fields: [professionID], references: [id])

  createdAt DateTime? @default(now())

  @@map("people")
}

model Portfolio {
  id       String @id @default(uuid())
  image    Json
  personID String

  person Person @relation(fields: [personID], references: [id])

  @@map("portfolios")
}

model Profession {
  id   String @id @default(uuid())
  name String

  person Person[]

  createdAt DateTime? @default(now())

  @@map("professions")
}

model FuelStation {
  id            String  @id @default(uuid())
  avatar        Json?
  name          String?
  table         Json?
  previoustable Json?
  district      String?
  userID        String

  user User @relation(fields: [userID], references: [id])

  createdAt DateTime? @default(now())
  updatedAt DateTime? @default(now())

  @@map("fuelstations")
}

model Price {
  id        String   @id @default(uuid())
  name      String
  price     String
  off       String
  advantage String[]

  createdAt DateTime? @default(now())
  updatedAt DateTime? @default(now())

  @@map("prices")
}
